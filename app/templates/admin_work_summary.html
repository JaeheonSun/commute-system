{% extends "admin_base.html" %}
{% block content %}

<form method="GET">
    <label>연도:</label>
    <select name="year">
        {% for y in years %}
            <option value="{{ y }}" {% if y == selected_year %}selected{% endif %}>
                {{ y }}
            </option>
        {% endfor %}
    </select>

    <label>월:</label>
    <select name="month">
        <option value="">전체</option>
        {% for m in range(1, 13) %}
            <option value="{{ m }}" {% if m == selected_month %}selected{% endif %}>
                {{ m }}월
            </option>
        {% endfor %}
    </select>

    <button type="submit">조회</button>
</form>

<table border="1" cellpadding="5">
    <tr>
        {% if not selected_month %}
            <p>{{ selected_year }}년 전체 근무 기록</p>
        {% else %}
            <p>{{ selected_year }}년 {{ selected_month }}월 근무 기록</p>
        {% endif %}
    </tr>

    {% for r in results %}
    <tr>
        <td>{{ r.username }}</td>
        <td>{{ (r.total_minutes or 0) // 60 }}시간 {{ (r.total_minutes or 0) % 60 }}분</td>
        <td>{{ (r.overtime_minutes or 0) // 60 }}시간 {{ (r.overtime_minutes or 0) % 60 }}분</td>
    </tr>
    {% endfor %}
</table>

{% endblock %}