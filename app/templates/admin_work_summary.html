{% extends "admin_base.html" %}

{% block title %}ê·¼ë¬´ ìš”ì•½{% endblock %}

{% block content %}

<div class="row">

  <!-- ğŸ”¹ í•„í„° ì¹´ë“œ -->
  <div class="col-md-12">
    <div class="card card-info">
      <div class="card-header">
        <h3 class="card-title">ê·¼ë¬´ ê¸°ë¡ ì¡°íšŒ</h3>
      </div>

      <form method="GET">
        <div class="card-body">
          <div class="row align-items-end">

            <div class="col-md-3">
              <div class="form-group">
                <label>ì—°ë„</label>
                <select name="year" class="form-control">
                  {% for y in years %}
                    <option value="{{ y }}" {% if y == selected_year %}selected{% endif %}>
                      {{ y }}
                    </option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <div class="col-md-3">
              <div class="form-group">
                <label>ì›”</label>
                <select name="month" class="form-control">
                  <option value="">ì „ì²´</option>
                  {% for m in range(1, 13) %}
                    <option value="{{ m }}" {% if m == selected_month %}selected{% endif %}>
                      {{ m }}ì›”
                    </option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <div class="col-md-2">
              <div class="form-group">
                <label>&nbsp;</label>
                <button type="submit" class="btn btn-info">
                  <i class="fas fa-search"></i> ì¡°íšŒ
                </button>
              </div>
            </div>

          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- ğŸ”¹ ê²°ê³¼ í…Œì´ë¸” -->
  <div class="col-md-12">
    <div class="card card-outline card-primary">
      <div class="card-header">
        <h3 class="card-title">
          {% if selected_month %}
            {{ selected_year }}ë…„ {{ selected_month }}ì›” ê·¼ë¬´ ê¸°ë¡
          {% else %}
            {{ selected_year }}ë…„ ì „ì²´ ê·¼ë¬´ ê¸°ë¡
          {% endif %}
        </h3>
      </div>

      <div class="card-body p-0">
        <table class="table table-striped table-hover mb-0">
          <thead>
            <tr>
              <th>ì§ì›</th>
              <th class="text-right">ì´ ê·¼ë¬´ ì‹œê°„</th>
              <th class="text-right">ì´ˆê³¼ ê·¼ë¬´</th>
            </tr>
          </thead>
          <tbody>
            {% for r in results %}
            <tr>
              <td>{{ r.username }}</td>
              <td class="text-right">
                {{ (r.total_minutes or 0) // 60 }}ì‹œê°„
                {{ (r.total_minutes or 0) % 60 }}ë¶„
              </td>
              <td class="text-right">
                {{ (r.overtime_minutes or 0) // 60 }}ì‹œê°„
                {{ (r.overtime_minutes or 0) % 60 }}ë¶„
              </td>
            </tr>
            {% else %}
            <tr>
              <td colspan="3" class="text-center text-muted">
                ì¡°íšŒ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>

</div>

{% endblock %}
